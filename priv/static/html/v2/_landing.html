<div class="row gx-0 pt-4 d-none d-lg-block">
  <div class="col-12 col-lg-10 offset-lg-1">
    <div class="bg-white row gx-0">
      <div class="col-12 col-lg-2">
        <div class="d-flex justify-content-center align-items-center ">
          <div class="bg-danger p-2 fw-bolder px-3 text-white w-100 text-center"><i class="fa fa-info-circle py-2 p-1"></i> <label data-label="recent">Recent</label></div>
        </div>
      </div>
      <div class="col-12 col-lg-10" style="overflow-x: hidden;">
        <div class="bg-white px-4  d-flex align-items-center " style="position: relative;overflow-x: hidden; height: 100%; width: 200%;">
          <div class="d-flex" id="l4" style="left: 0em;position: absolute;">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row gx-0">
  <div class="col-12 col-lg-10 offset-lg-1">
    <div class="row gx-0 gx-lg-4">
      <div class="col-12 col-lg-6">
        <div class="pb-4 pt-3 ps-2 ps-lg-0">
          <span class="pb-2 fs-5 border border-bottom border-top-0 border-start-0 border-end-0 border-5 border-danger fw-bolder">
            <label data-label="primary">Primary</label>
          </span>
        </div>
        <div class="bg-white" style="">
          <div id="carouselWithControls" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner" id="l1">
            </div>
            <a class="carousel-control-prev" href="#carouselWithControls" role="button" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselWithControls" role="button" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </a>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-6">
        <div class="row gx-0 gx-lg-4">
          <div class="col-12 col-lg-6">
            <div class="pb-4 pt-3 ps-2 ps-lg-0">
              <span class="pb-2 fs-5 border border-bottom border-top-0 border-start-0 border-end-0 border-5 border-danger fw-bolder">
                <label data-label="noteworthy">Noteworthy</label>
              </span>
            </div>
            <div class="" style="min-height: 200px;" id="l2">
            </div>
          </div>
          <div class="col-12 col-lg-6">
            <div class="pb-4 pt-3 ps-2 ps-lg-0">
              <span class="pb-2 fs-5 border border-bottom border-top-0 border-start-0 border-end-0 border-5 border-danger fw-bolder ">
                <label data-label="highlights">Highlights</label>
              </span>
            </div>
            <div class="" style="min-height: 200px;" id="l3">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row gx-0">
  <div class="col-12 col-lg-10 offset-lg-1">
    <div class="pb-4 ps-2 ps-lg-0">
      <span class="pb-2 fs-5 border border-bottom border-top-0 border-start-0 border-end-0 border-5 border-danger fw-bolder">
        <label data-label="editor-pick"> Editor's Pick</label>
      </span>
    </div>
  </div>
</div>
<div class="row gx-0">
  <div class="col-12 col-lg-10 offset-lg-1">
    <div class="row gx-0" id="l6">
    </div>
  </div>
</div>
<script type="text/javascript">
// ---- recent ----

var ablogs = App.api("blogs", { category: "南钟报" });
ablogs.forEach((blog, i) => {
  $("#l4").append(`<div class="ps-4 d-flex align-items-center justify-content-center text-nowrap"> 
					  				<div 
					  				    style="
					  						background-size: cover; 
					  						background-image: url('` + blog.img_url + `');
					  						height: 20px;
					  						width: 20px" 
					  						class="rounded-circle text-center bg-primary d-flex align-items-center justify-content-center text-white">
					          </div> 
					        	<span class="ps-2">` + blog.title + `</span>
					        </div>`)
})
var parent = $("#l4")[0]
var wi = parent.clientWidth;
var offset = 0
if (window.isRunning) {

} else {
  window.isRunning = true;
  setInterval(() => {
    offset += 0.3;
    if (offset > wi) {
      offset = 0
    }
    $("#l4").css("left", "-" + offset + "px")
  }, 0)
}

$("#l4")[0].insertAdjacentHTML('beforeend', $("#l4")[0].innerHTML);
$("#l4")[0].insertAdjacentHTML('beforeend', $("#l4")[0].innerHTML);


// ---- primary ----
ablogs.forEach((blog, i) => {
  var isActive = "active"
  if (i != 0) {
    isActive = ""
  }
  var card = `
			<div class="position-relative carousel-item ` + isActive + `" style="height: 516px;">
				<div data-title="` + blog.title + `"
					data-blog-id="` + blog.id + `"
					class="blog  position-relative "
					style="
					cursor: pointer;
				  overflow: hidden;
				  background: #C04848;
				  background: linear-gradient(rgba(255, 255, 255, 0), rgb(255, 255, 255, 0), rgb(255, 255, 255, 1)), url('` + blog.img_url + `');
				  background: linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0), rgba(2,2,2, 1)), url('` + blog.img_url + `');
					height: 516px;
					background-size: cover;
					background-repeat: no-repeat;
					background-position: center;
				"
				"></div>
				<div class="ps-4 p-2 d-flex flex-column align-items-start justify-content-center position-absolute" style="bottom: 4px;">
						<span class="text-white badge rounded-pill bg-danger">` + blog.category.name + `</span>
					<span class="pt-2 pb-1 text-white fs-3 fw-bold">` + blog.title + `</span>
					<span  class="text-sm text-muted pb-2">` + blog.subtitle + `</span>
				</div>
			</div>
		`
  $("#l1").append(card)


})

var dblogs = App.api("blogs", { category: "代祷事项" });
// ---- noteworthy ----
dblogs.forEach((blog, i) => {
  if (i < 2) {
    $("#l2").append(`
					<div class="position-relative px-3 px-lg-0 mb-3 " style="height: 250px;">
						<div data-title="` + blog.title + `"
							data-blog-id="` + blog.id + `"
							class="blog position-relative"
							style="
							cursor: pointer;
						  overflow: hidden;
						  background: #C04848;
						  background: linear-gradient(rgba(255, 255, 255, 0), rgb(255, 255, 255, 0), rgb(255, 255, 255, 1)), url('` + blog.img_url + `');
						  background: linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0), rgba(2,2,2, 1)), url('` + blog.img_url + `');
							height: 250px;
							background-size: cover;
							background-repeat: no-repeat;
							background-position: center;
						"
						"></div>
						<div class="ps-4 p-2 d-flex flex-column align-items-start justify-content-center position-absolute" style="bottom: 4px;">
								<span class="text-white badge rounded-pill bg-danger">` + blog.category.name + `</span>
							<span class="pt-2 pb-1 text-white fs-5 fw-bold">` + blog.title + `</span>
						</div>
					</div>
				`)

  }
})

var blogs = App.api("blogs", { category: "年会活动" });
// ---- highlights ----
blogs.forEach((blog, i) => {

  if (i < 4) {
    $("#l3").append(`
					<div 
					  style="cursor: pointer;" data-title="` + blog.title + `"
						data-blog-id="` + blog.id + `"
						class="blog row gx-0 px-3 px-lg-0  pb-3">
							 <div class="col-12 col-lg-3"> 
									<div 
										style="
												  overflow: hidden;
												  background: #C04848;
												  background: linear-gradient(rgba(255, 255, 255, 0), rgb(255, 255, 255, 0), rgb(255, 255, 255, 1)), url('` + blog.img_url + `');
												  background: linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0), rgba(2,2,2, 1)), url('` + blog.img_url + `');
													height: 116.5px;
													background-size: cover;
													background-repeat: no-repeat;
													background-position: center;
												"
									"></div>
							 </div>
							 <div class="col-12 col-lg-9 bg-white"> 

									<div class=" p-3 h-100 d-flex flex-column align-items-start justify-content-center " style="bottom: 4px;">
											<span class=" badge rounded-pill bg-danger">` + blog.category.name + `</span>
											<span class="pt-2 pb-1   fw-bold">` + blog.title + `</span>
									</div>
							 </div>
					</div>
				`)

  }
})

// ---- editor pick ----
ablogs.forEach((blog, i) => {
  if (i < 6) {

  }
  $("#l6").append(`
					<div class="col-sm col-12 px-3 ps-lg-0 pb-3 " style="">
								<div class="position-relative">
									<div 
										class="blog position-relative" data-title="` + blog.title + `"
											data-blog-id="` + blog.id + `"
										style="
												  overflow: hidden;
												  		  cursor: pointer;
												  background: #C04848;
												  background: linear-gradient(rgba(255, 255, 255, 0), rgb(255, 255, 255, 0), rgb(255, 255, 255, 1)), url('` + blog.img_url + `');
												  background: linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0), rgba(2,2,2, 1)), url('` + blog.img_url + `');
													height: 200px;
													background-size: cover;
													background-repeat: no-repeat;
													background-position: center;"
									">
									</div>
									<div class="position-absolute p-3 d-flex flex-column align-items-start justify-content-start " style="bottom: 4px;">
											<span class=" badge rounded-pill bg-danger">` + blog.category.name + `</span>
									</div>					
								</div>
								<div 
										data-blog-id="` + blog.id + `"
								class="blog  p-3 d-flex flex-column align-items-start justify-content-start " style="cursor: pointer;">
											<span class="pb-1   fw-bold">` + blog.title + `</span>
											<span class="pb-1   text-sm text-muted d-flex align-items-center justify-content-center">
												<i class="fa fa-clock pe-2"> </i>
												<span>` + blog.ago + ` ago</span>
											</span>
									</div>
					</div>
				`)
})


$(document).ready(() => {
  $(".blog").each((i, v) => {
    v.onclick = function() {
      window.currentBlog = blogs.filter((b, ii) => {
        return b.id == v.dataset.blogId
      })[0]
      navigateTo("/blogs/" + v.dataset.blogId + "/" + v.dataset.title)
    }
  })
})
</script>